export let h=(e,t={},...o)=>({e:e,p:t,c:o});export let x=(e,...t)=>{let o=[{c:[]}],s=(e,t,o)=>{if(!e)return[e,o];let s=e.match(t);return[e.substring(s[0].length),s[1]]};let c=0;return e.forEach((e,n)=>{for(;e;){let r;switch(e=e.trimLeft(),c){case 0:"<"===e[0]?"/"===e[1]?([e,r]=s(e.substring(2),/^(\w+)/,t[n]),c=2):([e,r]=s(e.substring(1),/^(\w+)/,t[n]),c=1,o.push(h(r,{}))):([e,r]=s(e,/^([^<]+)/,""),o[o.length-1].c.push(r));break;case 1:if("/"===e[0]&&">"===e[1])e=e.substring(2),o[o.length-2].c.push(o.pop()),c=0;else if(">"===e[0])e=e.substring(1),c=0;else{let c=e.match(/^([\w-]+)=/);console.assert(c),e=e.substring(c[0].length);let h=c[1];[e,r]=s(e,/^"([^"]*)"/,t[n]),o[o.length-1].p[h]=r}break;case 2:console.assert(">"===e[0]),o[o.length-2].c.push(o.pop()),e=e.substring(1),c=0}}0===c&&(o[o.length-1].c=o[o.length-1].c.concat(t[n]))}),o[0].c[0]};let hooks,forceUpdate,index=0;let getHook=e=>{let t=hooks[index++];return t||(t={value:e},hooks.push(t)),t};export let useReducer=(e,t)=>{let o=getHook(t),s=forceUpdate;return[o.value,t=>{o.value=e(o.value,t),s()}]};export let useState=e=>useReducer((e,t)=>t,e);export let useEffect=(e,t=[])=>{let o=getHook();changed(o.value,t)&&(o.value=t,e())};let changed=(e,t)=>!e||t.some((t,o)=>t!==e[o]);export let render=(e,t,o)=>{e=[].concat(e);let s,c={},n=t.h||{};for(t.h={},e.forEach((s,r)=>{for(forceUpdate=()=>render(e,t);"function"==typeof s.e;){let e=s.p&&s.p.k||""+s.e+(c[s.e]=(c[s.e]||1)+1);hooks=n[e]||[],index=0,s=s.e(s.p,s.c,forceUpdate),t.h[e]=hooks}o=o||"svg"===s.e;let h=t.childNodes[r];if(h&&(s.e?h.e===s.e:h.data===s)||(h=t.insertBefore((()=>s.e?o?document.createElementNS("http://www.w3.org/2000/svg",s.e):document.createElement(s.e):document.createTextNode(s))(),h)),s.e){h.e=s.e;for(let e in s.p)h[e]!==s.p[e]&&(o?h.setAttribute(e,s.p[e]):h[e]=s.p[e]);render(s.c,h,o)}else h.data=s});s=t.childNodes[e.length];)t.removeChild(s)};
