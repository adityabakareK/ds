export const h=(e,t={},...o)=>({e:e,p:t,c:o});export const x=(e,...t)=>{const o=[{c:[]}],s=(e,t,o)=>{if(!e)return[e,o];let s=e.match(t);return[e.substring(s[0].length),s[1]]};let r=0;return e.forEach((e,c)=>{for(;e;){let n;switch(e=e.trimLeft(),r){case 0:"<"===e[0]?"/"===e[1]?([e,n]=s(e.substring(2),/^([a-zA-Z0-9]+)/,t[c]),r=2):([e,n]=s(e.substring(1),/^([a-zA-Z0-9]+)/,t[c]),r=1,o.push(h(n,{}))):([e,n]=s(e,/^([^<]+)/,""),o[o.length-1].c.push(n));break;case 1:if("/"===e[0]&&">"===e[1])e=e.substring(2),o[o.length-2].c.push(o.pop()),r=0;else if(">"===e[0])e=e.substring(1),r=0;else{let r=e.match(/^([a-zA-Z0-9]+)=/);console.assert(r),e=e.substring(r[0].length);let a=r[1];[e,n]=s(e,/^"([^"]*)"/,t[c]),o[o.length-1].p[a]=n}break;case 2:console.assert(">"===e[0]),o[o.length-2].c.push(o.pop()),e=e.substring(1),r=0}}0===r&&(o[o.length-1].c=o[o.length-1].c.concat(t[c]))}),o[0].c[0]};let hooks,forceUpdate,index=0,getHook=e=>{let t=hooks[index++];return t||(t={value:e},hooks.push(t)),t};export const useReducer=(e,t)=>{const o=getHook(t),s=forceUpdate;return[o.value,t=>{o.value=e(o.value,t),s()}]};export const useState=e=>useReducer((e,t)=>t,e);export const useEffect=(e,t=[])=>{const o=getHook();changed(o.value,t)&&(o.value=t,e())};const changed=(e,t)=>!e||t.some((t,o)=>t!==e[o]);export const render=(e,t)=>{e=[].concat(e);let o,s={},r=t.h||{};for(t.h={},e.forEach((o,c)=>{for(forceUpdate=()=>render(e,t);"function"==typeof o.e;){let e=o.p&&o.p.k||""+o.e+(s[o.e]=(s[o.e]||1)+1);hooks=r[e]||[],index=0,o=o.e(o.p,o.c,forceUpdate),t.h[e]=hooks}let n=t.childNodes[c];if(n&&(o.e?n.e===o.e:n.data===o)||(n=t.insertBefore((()=>o.e?document.createElement(o.e):document.createTextNode(o))(),n)),o.e){n.e=o.e;for(let e in o.p)n[e]!==o.p[e]&&(n[e]=o.p[e]);render(o.c,n)}else n.data=o});o=t.childNodes[e.length];)t.removeChild(o)};
